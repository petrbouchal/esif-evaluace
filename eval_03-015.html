<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="cs" xml:lang="cs"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Vyhodnocení výsledků podpory sociálních inovací v PO 3 OPZ – esif-evaluace</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Žádný výsledek",
    "search-matching-documents-text": "Nalezené výsledky",
    "search-copy-link-title": "Zkopírovat odkaz pro vyhledávání",
    "search-hide-matches-text": "Skrýt další výsledky",
    "search-more-match-text": "další výsledek v tomto dokumentu",
    "search-more-matches-text": "dalších výsledků v tomto dokumentu",
    "search-clear-button-title": "Vymazat",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Zrušit",
    "search-submit-button-title": "Odeslat",
    "search-label": "Hledat"
  }
}</script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">


<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Na této stránce</h2>
   
  <ul>
  <li><a href="#evaluace" id="toc-evaluace" class="nav-link active" data-scroll-target="#evaluace">Evaluace</a></li>
  <li><a href="#etapy" id="toc-etapy" class="nav-link" data-scroll-target="#etapy">Etapy</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Vyhodnocení výsledků podpory sociálních inovací v PO 3 OPZ</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>(<a href="./index.html">zpět na seznam evaluací</a>)</p>
<section id="evaluace" class="level2">
<h2 class="anchored" data-anchor-id="evaluace">Evaluace</h2>
<div class="cell">
<div class="cell-output-display">
<div class="popis-evaluace-box" style="margin-bottom: 0px">
<div class="popis-evaluace">
<span>Popis: </span>
Vyhodnocení příspěvku inovačních výzev k plnění SC PO 3  "Zvýšit kvalitu a kvantitu využívání sociálních inovací a mezinárodní spolupráce v tematických oblastech OPZ", včetně analýzy předpokladů a rizik dosažení cílů podpory. V rámci evaluace budou vyhodnoceny výzvy na podporu sociálních inovací a inovačního prostředí č. 018, 024 a 124.    
</div>
<div class="zamereni-evaluace">Zaměření evaluace: Dopadová/Výsledková</div>
</div>
</div>
</div>
</section>
<section id="etapy" class="level2">
<h2 class="anchored" data-anchor-id="etapy">Etapy</h2>
<div class="cell">
<div class="cell-output-display">
<section id="03.015.01" class="level3">
<h3 data-anchor-id="03.015.01" class="anchored">Vyhodnocení výsledků podpory sociálních inovací v PO 3 OPZ</h3>
<div class="popis-etapy-box">
<div class="detail-heading">
<span class="detail-label">Datum dokončení: </span>
30. listopadu 2023
</div>
<div class="detail-heading">
<span class="detail-label">Popis etapy</span>
</div>
<div class="popis-etapy-text">Vyhodnocení příspěvku inovačních výzev k plnění SC PO 3  "Zvýšit kvalitu a kvantitu využívání sociálních inovací a mezinárodní spolupráce v tematických oblastech OPZ". Analýza relevantních datových zdrojů k výzvám PO 3, individuální hloubkové rozhovory a fokusní skupiny s realizátory, evaluátory a stakeholdery vybraných projektů podpořených ve výzvách PO 3, CBA vybraných projektů.

Od první poloviny roku 2018 probíhalo ve spolupráci s oddělením 833 nastavování designu evaluace. Následně byla připravena veřejná zakázka na první vlnu kvalitativního sběru dat u realizátorů vybraných projektů podpořených v inovačních výzvách č. 24 a 124 OPZ. Tato zakázka byla realizována od května 2019 do června 2020 a navázala na ni druhá zakázka na další vlnu projektů z těchto výzev realizovaná od června 2020 do května 2021. Na základě dosavadních průběžných zjištění byla v polovině roku 2020 ve spolupráci s implementačním oddělením zahájena práce na aktualizaci evaluačního designu a předběžně naplánována převážně interně zpracovávaná část vyhodnocení (detailní monitoring podpořených projektů, případové studie vzorku projektů). Dále v druhé polovině roku 2020 začaly práce na mapování možností externího zadání CBA vybraného projektu, v prosinci proběhla předběžná tržní konzultace a v průběhu roku 2021 byla vyhlášena VZMR na realizaci a vyhodnocení uskutečnitelnosti realizace CBA v případě dvou projektů podpořených ve výzvě č. 24 OPZ. Tato zakázka byla ukončena na konci srpna 2022.</div>
<div class="detail-heading">
<span class="detail-label">Komentář</span>
</div>
<div class="popis-etapy-text">Zpráva představuje souhrnný podklad z VYHODNOCENÍ VÝSLEDKŮ PODPORY SOCIÁLNÍCH INOVACÍ V PO 3 OPZ, které bylo zahájeno v červnu roku 2018 a zahrnovalo několik etap vyhodnocení. Vzhledem ke specifické povaze Prioritní osy číslo 3 Operačního programu Zaměstnanost ? Sociální inovace a mezinárodní spolupráce, tvořily vyhodnocení samostatné a v rámci závěrů a zjištění lze pouze odkázat do jednotlivých kapitol zprávy, resp. etap evaluace představovaných samostatnými výstupy, které byly vždy v době ukončení dané etapy šířeny samostatně a sdíleny se všemi relevantními aktéry. Průběžná zjištění se tak promítala do dalšího nastavení výzev OPZ i do struktury podpory v rámci Priority 3 Operačního programu Zaměstnanost plus ? Sociální inovace.</div>
<div>
<div class="link">
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7ODQzODk5MDk7UHJpbG9oYURNUztGYWxzZQ==" style="background-color: white; color: darkblue;">
<span style="display: inline-block; width: 20px;">
<i class="far fa-file-pdf" role="presentation" aria-label="file-pdf icon"></i>
<span> </span>
</span>
</a>
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7ODQzODk5MDk7UHJpbG9oYURNUztGYWxzZQ==">
<span>VYHODNOCENÍ VÝSLEDKŮ PODPORY SOCIÁLNÍCH INOVACÍ V PO 3 OPZ final</span>
</a>
<span> </span>
<i class="fas fa-globe" role="presentation" aria-label="globe icon"></i>
</div>
</div>
</div>
</section>
<section id="03.015.02" class="level3">
<h3 data-anchor-id="03.015.02" class="anchored">Kvalitativní šetření inovačních projektů PO 3 OP Z</h3>
<div class="popis-etapy-box">
<div class="detail-heading">
<span class="detail-label">Datum dokončení: </span>
19. června 2020
</div>
<div class="detail-heading">
<span class="detail-label">Popis etapy</span>
</div>
<div class="popis-etapy-text">Individuální hloubkové rozhovory a fokusní skupiny s realizátory, evaluátory a stakeholdery vybraných projektů podpořených ve výzvě č. 24 OPZ</div>
<div class="detail-heading">
<span class="detail-label">Komentář</span>
</div>
<div class="popis-etapy-text">Kvalitativní šetření inovačních projektů PO 3 OPZ bylo realizováno se záměrem vyhodnotit příspěvek podpořených projektů k naplnění Prioritní osy 3 a identifikovat klíčové faktory k dosažení výsledků projektů. Tyto výstupy mají sloužit řídícímu orgánu jako podklad pro nastavení podpůrných aktivit a procesů výběru projektů, pro komunikaci výsledků projektů, a především pro samotné inovátory. Konkrétní zjištění a výsledky jsou předmětem Zprávy z Etapy I. a Zprávy z Etapy II. šetření.</div>
<div>
<div class="link">
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTA4MTkzNzAwMztQcmlsb2hhRE1TO0ZhbHNl" style="background-color: white; color: darkblue;">
<span style="display: inline-block; width: 20px;">
<i class="fas fa-business-time" role="presentation" aria-label="business-time icon"></i>
<span> </span>
</span>
</a>
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTA4MTkzNzAwMztQcmlsb2hhRE1TO0ZhbHNl">
<span>Etapa II Manažerská zpráva AJ</span>
</a>
<span> </span>
<i class="fas fa-globe" role="presentation" aria-label="globe icon"></i>
</div>
</div>
</div>
</section>
<section id="03.015.03" class="level3">
<h3 data-anchor-id="03.015.03" class="anchored">Kvalitativní šetření inovačních projektů PO 3 OP Z - 2. vlna</h3>
<div class="popis-etapy-box">
<div class="detail-heading">
<span class="detail-label">Datum dokončení: </span>
1. června 2021
</div>
<div class="detail-heading">
<span class="detail-label">Popis etapy</span>
</div>
<div class="popis-etapy-text">Individuální hloubkové rozhovory s realizátory, evaluátory a stakeholdery vybraných projektů podpořených ve výzvě č. 24 a 124 OPZ</div>
<div class="detail-heading">
<span class="detail-label">Komentář</span>
</div>
<div class="popis-etapy-text">Druhá vlna kvalitativního šetření inovačních projektů PO 3 OPZ byla realizována se záměrem vyhodnotit příspěvek podpořených projektů k naplnění Prioritní osy 3 a identifikovat klíčové faktory k dosažení výsledků projektů. Tyto výstupy mají sloužit řídícímu orgánu jako podklad pro nastavení podpůrných aktivit a procesů výběru projektů, pro komunikaci výsledků projektů, a především pro samotné inovátory. Konkrétní zjištění a výsledky jsou předmětem Zprávy z Etapy I. a Zprávy z Etapy II. šetření.</div>
<div>
<div class="link">
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTA4MTgzMTMyMjtQcmlsb2hhRE1TO0ZhbHNl" style="background-color: white; color: darkblue;">
<span style="display: inline-block; width: 20px;">
<i class="fas fa-section" role="presentation" aria-label="section icon"></i>
<span> </span>
</span>
</a>
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTA4MTgzMTMyMjtQcmlsb2hhRE1TO0ZhbHNl">
<span>Smlouva registr smluv</span>
</a>
</div>
</div>
</div>
</section>
<section id="03.015.04" class="level3">
<h3 data-anchor-id="03.015.04" class="anchored">Analýzy nákladů a přínosů u vybraných sociálně inovačních projektů </h3>
<div class="popis-etapy-box">
<div class="detail-heading">
<span class="detail-label">Datum dokončení: </span>
22. srpna 2022
</div>
<div class="detail-heading">
<span class="detail-label">Popis etapy</span>
</div>
<div class="popis-etapy-text">Realizace Analýzy nákladů a přínosů u vybraných sociálně inovačních projektů, podpořených v rámci Operačního programu Zaměstnanost. Zakázka je dílčí součástí celkového Vyhodnocení výsledků podpory sociálních inovací v PO 3 OPZ. Jedním z cílů zakázky stanovených zadavatelem je zodpovědět, zda je u vybraného projektu při současné podobě nastavení inovačních výzev v rámci Operačního programu Zaměstnanost a se současnými dostupnými daty reálně možné Analýzu nákladů a přínosů realizovat, případně jaký typ dat je pro naplnění stanovených výzkumných cílů potřeba. V rámci zakázky by mělo dojít nejen k tomuto zhodnocení proveditelnosti a využitelnosti Analýzy nákladů a přínosů u vybraného projektu, ale také k identifikaci problémů a rizik při realizaci Analýzy nákladů a přínosů, spolu s definováním případných doporučení pro minimalizaci těchto rizik.
Pokud se Analýza nákladů a přínosů ukáže u vybraného projektu jako proveditelná, bude dalším cílem zakázky zjistit, jaké efekty přináší daný projekt. V rámci zakázky by u daného projektu mělo dojít k změření ekonomického dopadu intervence ke sledování a vyčíslení finančních nákladů a výnosů spjatých s realizací projektu spolu se zhodnocením skutečných efektů projektu/inovace pro celou společnost (přímých i nepřímých). </div>
<div class="detail-heading">
<span class="detail-label">Komentář</span>
</div>
<div class="popis-etapy-text">V rámci VZMR došlo k zodpovězení výzkumné otázky, zda je u vybraných projektů reálně možné Analýzu nákladů a přínosů realizovat. V rámci zakázky došlo nejen k zhodnocení proveditelnosti a využitelnosti CBA, ale také k identifikaci problémů a rizik při realizaci, spolu s definováním doporučení pro jejich minimalizaci. U projektu Cochemský model výsledky analýzy ukázaly, že komplexní CBA není možné realizovat, jelikož data pro klíčové dopady intervence nebyla sbírána. Ideální evaluace by se opírala o dlouhodobý výzkum dospívání dětí, jenž by umožnil sledovat cílovou skupinu v dlouhém časovém období. U projektu Společně na Svobodu výsledky první fáze analýzy ukázaly, že komplexní CBA není možné realizovat, přestože mnohé aspekty komplexní CBA byly splněny. Slabinu představuje design experimentu kvůli nenáhodnému rozdělení cílové skupiny a malému vzorku. Dalším cílem zakázky bylo zjistit, jaké efekty přináší daný projekt, v ideálním případě skrze změření ekonomického dopadu intervence ke sledování a vyčíslení finančních nákladů a výnosů spjatých s realizací projektu spolu se zhodnocením skutečných efektů inovace pro celou společnost (přímých i nepřímých). V případě projektu Cochem bylo provedeno několik expertních odhadů, které se zaměřily na vybrané dopady: úspory časových kapacit sociálních pracovníků a úspory na straně soudu. Jedná se však o velmi dílčí odhady, na základě kterých nelze hodnotit celkové přínosy dané intervence, ani je nelze spolehlivě využít pro odhad dopadů při škálování. U projektu SnS byly zpřesněny výpočty nákladovosti trestné činnosti a recidivy, zejména zahrnutím dalších položek jako nehmotné škody. Konkrétně byly vyčísleny dvě stínové ceny, celkové společenské náklady trestného činu, o kterém nejsou dostupné žádné další informace, a trestného činu, po kterém následuje nepodmínečné odsouzení k VTOS. K finálnímu výpočtu a porovnání přínosů a nákladů v analýze nedošlo z důvodu nespolehlivosti naměřeného rozdílu v recidivě mezi KS a IS.</div>
<div>
<div class="link">
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTM4MjkxMzQ5MjtQcmlsb2hhRE1TO0ZhbHNl" style="background-color: white; color: darkblue;">
<span style="display: inline-block; width: 20px;">
<i class="fas fa-section" role="presentation" aria-label="section icon"></i>
<span> </span>
</span>
</a>
<a href="https://msiu.mssf.cz/Document.aspx?docID=VU1TUHJpbG9oeUV2YWw7MTM4MjkxMzQ5MjtQcmlsb2hhRE1TO0ZhbHNl">
<span>Smlouva Cochemský model - RS</span>
</a>
</div>
</div>
</div>
</section>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Zkopírováno!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Zkopírováno!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>